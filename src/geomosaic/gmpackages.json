{
    "order": [
        "pre_processing",
        "func_classification_rb",
        "tax_classification_rb",
        "assembly",
        "assembly_qc",
        "assembly_qc_readmapping",
        "orf_prediction",
        "gene_coverage",
        "binning",
        "binning_derep",
        "binning_qa",
        "mags_retrieval",
        "mags_func_annotation",
        "mags_tax_annotation",
        "mags_orf_prediction",
        "mags_domain_annotation"
    ],

    "graph": [
        ["pre_processing", "func_classification_rb"],
        ["pre_processing", "tax_classification_rb"],
        ["pre_processing", "assembly"],
        ["pre_processing", "assembly_qc_readmapping"],
        
        ["assembly", "assembly_qc"],
        ["assembly", "assembly_qc_readmapping"],
        ["assembly", "orf_prediction"],
        ["assembly", "binning"],
        ["assembly", "binning_derep"],
        ["assembly", "binning_qa"],

        ["assembly_qc_readmapping", "gene_coverage"],
        ["assembly_qc_readmapping", "binning"],

        ["orf_prediction", "gene_coverage"],

        ["binning", "binning_derep"],

        ["binning_derep", "binning_qa"],
        ["binning_derep", "mags_retrieval"],

        ["binning_qa", "mags_retrieval"],

        ["mags_retrieval", "mags_orf_prediction"],
        ["mags_retrieval", "mags_func_annotation"],
        ["mags_retrieval", "mags_tax_annotation"],

        ["mags_orf_prediction", "mags_domain_annotation"]
    ],

    "modules": {
        "pre_processing": {
            "description": "Module: Pre processing with quality check",
            "choices": {
                "fastp": "fastp",
                "Trim-Galore": "trimgalore",
                "Trimmomatic": "trimmomatic"
            }
        },
    
        "assembly": {
            "description": "Module: Assembly",
            "choices": {
                "MetaSpades": "metaspades",
                "MegaHit": "megahit"
            }
        },
    
        "assembly_qc": {
            "description": "Module: Assembly evaluation with metrics",
            "choices": {
                "Quast": "quast"
            }
        },
    
        "func_classification_rb": {
            "description": "Module: Functional classification [Read-based]",
            "choices": {
                "mi-faser": "mifaser"                
            }
        },
    
        "tax_classification_rb": {
            "description": "Module: Taxonomic classification [Read-based]",
            "choices": {
                "Kaiju": "kaiju",
                "MetaPhlAn": "metaphlan"
            }
    
        },

        "binning": {
            "description": "Module: Binning",
            "choices": {
                "MaxBin2 + MetaBat2 + Concoct": "multi_binners"
            }    
        },

        "binning_derep": {
            "description": "Module: Binning Deeplication",
            "choices": {
                "DAS_tool": "das_tool"
            }  
        },

        "binning_qa": {
            "description": "Module: Binning Quality Evaluation",
            "choices": {
                "CheckM": "checkm"
            }
        },

        "assembly_qc_readmapping": {
            "description": "Module: Assembly evaluation by read mapping",
            "choices": {
                "BBMap": "bbmap"
            }
    
        },

        "gene_coverage": {
            "description": "Module: tracking coverage for genes of interest through HMM models",
            "choices": {
                "HMMs Coverage": "hmms_cov"
            }
        },

        "orf_prediction": {
            "description": "Module: perform ORF prediction",
            "choices": {
                "Prodigal": "prodigal"
            }
        },

        "mags_retrieval": {
            "description": "Module: get MAGs based on Contamination and Completeness threshold",
            "choices": {
                "MAGs HQ": "mags"
            }
        },

        "mags_func_annotation": {
            "description": "Module: Perform annotation of filtered MAGs",
            "choices": {
                "DRAM on MAGs": "mags_dram"
            }
        },

        "mags_tax_annotation": {
            "description": "Module: Perform taxonomic annotation of filtered MAGs",
            "choices": {
                "GTDBTK on MAGs": "mags_gtdbtk"
            }
        },

        "mags_orf_prediction": {
            "description": "Module: perform ORF prediction for each retrieved MAG",
            "choices": {
                "Prodigal on MAGs": "mags_prodigal"
            }
        },

        "mags_domain_annotation": {
            "description": "Module: perform domain-based annotation for each retrieved MAG",
            "choices": {
                "reCOGnizer on MAGs": "mags_recognizer"
            }
        }
    },
    
    "additional_input": {
        "gene_coverage": {
            "hmm_folder": {
                "description": "\n[Additional Parameter for Gene Coverage] Description: you need to specify also an absolute path to the folder containing the HMM files\nRequired parameter: Absolute path",
                "type": "folder"
            }
        },

        "mags_retrieval": {
            "completness_threshold":{
                "description": "\n[Additional Parameter to retrieve HQ MAGs] Description: COMPLETENESS parameters to filter retrieved bins\nRequired parameter: integer value - Suggested value: 90",
                "type": "integer"
            },
            "contamination_threshold":{
                "description": "\n[Additional Parameter to retrieve HQ MAGs] Description: CONTAMINATION parameters to filter retrieved bins\nRequired parameter: integer value - Suggested value: 10",
                "type": "integer"
            }
        }
    },

    "envs": {
        "mags_gtdbtk": "gtdbtk.yaml"
    }
}